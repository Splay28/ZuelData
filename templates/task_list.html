<!DOCTYPE HTML>
<!--
	Editorial by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)

	以上为模板信息
	作者 Splay28
-->
<html>
	<head>
		<title>案件一览表</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="shortcut icon" href="{{ url_for('static', filename='favicon.png') }}">
		<link rel="stylesheet" href={{ url_for("static",filename = "main/assets/css/main.css" ) }} />
		<script src={{ url_for("static",filename = "main/assets/js/jquery.min.js" ) }}></script>
		<script type="text/javascript" src={{ url_for("static",filename = "DataTables/datatables.js" ) }}></script>
		<script>
			function getcontent(){
				data = '{{data|tojson}}'
				type = '{{type}}'
				if(data == -1){
					document.getElementById("clear").remove();
					return;
				}
				data=JSON.parse(data);
				//cata=['articles','assessments','lessons','notices','tags','users']

				let noticetablebody = document.getElementById("noticetablebody")
				for(let i=0;i<data.length;i++){
					let tr = document.createElement('tr')
					let title = document.createElement('td')
					let from = document.createElement('td')
					let to = document.createElement('td')
					let pubdate = document.createElement('td')
					let status = document.createElement('td')
					let quota = document.createElement('td')
					let a = document.createElement('a')
					a.innerHTML = data[i][1]
					a.href = '/task/content?url=' + data[i][0]
					if(!data[i][2])data[i][2] = '已註銷'
					for(let j=0;j<data[i][2].length;j++){
						let a_f = document.createElement('a')
						a_f.innerHTML = data[i][2][j][1]
						a_f.href = '/user/base?url=' + data[i][2][j][0]
						a_f.style="margin-right:1em";
						from.appendChild(a_f)
					}
					for(let j=0;j<data[i][3].length;j++){
						let a_t = document.createElement('a')
						a_t.innerHTML = data[i][3][j][1]
						a_t.href = '/user/base?url=' + data[i][3][j][0]
						a_t.style="margin-right:1em";
						to.appendChild(a_t)
					}
					pubdate.innerHTML = data[i][4]
					status.innerHTML = data[i][5]
					for(let j=0;j<data[i][6].length;j++){
						let a_q = document.createElement('a')
						a_q.innerHTML = data[i][6][j][1]
						a_q.href = '/task/content?url=' + data[i][6][j][0]
						a_q.style="margin-right:1em";
						quota.appendChild(a_q)
					}

					title.appendChild(a)

					tr.appendChild(title)
					tr.appendChild(from)
					tr.appendChild(to)
					tr.appendChild(pubdate)
					tr.appendChild(status)
					tr.appendChild(quota)

					tablebody.appendChild(tr)
				}

				if(!data.length)document.getElementById("count").innerHTML = "共：" + 0 + "条数据。";
				else document.getElementById("count").innerHTML = "共：" + data.length + "条数据。";
				$('#table').DataTable({
					info: false,
					language: {
						lengthMenu: '每一页显示 _MENU_ 条数据',
						zeroRecords: '0条数据',
						search: "在以下列表中搜索：",
						paginate: {
							first:      "第一页",
							previous:   "上一页",
							next:       "下一页",
							last:       "最后一页"
						}
					},
				});
			}
		</script>
	</head>
	<body class="is-preload" onload="getcontent()">
		
		<!-- Wrapper -->
		<div id="wrapper">

			<!-- Main -->
				<div id="main">
					<div class="inner">

						<!-- Header -->
							<header id="header">
								<a href="/index" class="logo"><strong>中南数据</strong></a>
							</header>

							<!-- Content -->
								<section>
									<header class="main">
										<h1>案件一览表</h1>
									</header>
									<div id="container">
										<table id="table" class="alt">
											<thead>
												<tr>
													<th>案件名</th>
													<th>来自</th>
													<th>发往</th>
													<th>上传时间</th>
													<th>状态</th>
													<th>来往办理记录</th>
												</tr>
											</thead>
											<tbody id="tablebody">
											</tbody>
											<tfoot>
												<tr>
													<td colspan="2"></td>
													<td id="count"></td>
												</tr>
											</tfoot>
										</table>
									</div>
									
								</section>

						</div>
					</div>

<!-- Sidebar -->
<div id="sidebar">
    <div class="inner">

        <!-- Search -->
            <section id="search" class="alt">
                <form method="post" action="/api/search">
                    <input type="text" name="query" placeholder="从这里搜索" />
                    <input type="text" name="type" value="all" style='display: none;'/>
                    <input type="submit" value="搜索" class="primary fit">
                </form>
            </section>

        <!-- Menu -->
		<nav id="menu">
			<header class="major">
				<h2>主菜单</h2>
			</header>
			<ul>
				<li><a href="/index">首页</a></li>
				<li><a href="/lesson/list">课程&评价</a></li>
				<li><a href="/blog/page">博客</a></li>
				<li><a href="/task/list">案件一览</a></li>
				<li id="netdisk_footer"><a href="/netdisk">网盘</a></li>
				<li>
					<span class="opener">创作</span>
					<ul>
						<li id="blog_footer"><a href="/blog/publish">发布博客</a></li>
						<li id="file_footer"><a href="/task/publish">创建任务</a></li>
						<li id="notice_footer"><a href="/notice/publish">发布公告</a></li>
						<li id="back_footer"><a href="/backstage">后台管理</a></li>
					</ul>
				</li>
				<li><a href="/notice/page">公告</a></li>
				<li><a href="/arrangement">人员安排</a></li>
				<li><a href="/user/setting">修改用户设置</a></li>
				<li><a href="/about">关于</a></li>
				<li><a href="/logout">退出登录</a></li>
			</ul>
		</nav>

        <!-- Section -->
            <section>
                <header class="major">
                    <h2>博客推荐</h2>
                </header>
                
                <div id="posts" class="mini-posts"></div>
                <ul class="actions">
                    <li><a href="/blog/page" class="button">了解更多</a></li>
                </ul>
            </section>

        <!-- Section -->
            <section>
                <header class="major">
                    <h2>联系我们</h2>
                </header>
                <p>中南数据（ZN Data）是一个自主组织运维的博客数据系统，致力于<del>追求实质正义并</del>提供法学学科从理论到实践的桥梁。</p>
                <ul class="contact">
                    <li class="icon solid fa-envelope">如无特殊情况，我们会在每学期第1-14个教学周的工作日于校内、洪山区人民法院和东湖新技术开发区人民法院安排值班岗位，请在线下联络我们</li>
                    <li class="icon solid fa-phone">(027) 8838-6792</li>
                    <li class="icon solid fa-home">中南财经政法大学文治楼东法律援助与保护中心<br />
                    湖北省武汉市洪山区南湖大道182号</li>
                </ul>
            </section>

        <!-- Footer -->
            <footer id="footer">
                <p class="copyright">&copy;All rights reserved by 中南法援. Powered by: <a href="https://github.com/Splay28">Splay28</a>/<a href="https://user.qzone.qq.com/1176630472">申君毅</a>.</p>
            </footer>

    </div>
</div>

</div>

<!-- Scripts -->
<script src={{ url_for("static",filename = "main/assets/js/browser.min.js" ) }}></script>
<script src={{ url_for("static",filename = "main/assets/js/breakpoints.min.js" ) }}></script>
<script src={{ url_for("static",filename = "main/assets/js/util.js" ) }}></script>
<script src={{ url_for("static",filename = "main/assets/js/main.js" ) }}></script>

</body>
</html>